Automerging
==============
Looks for clusters that likely belong to the same cell, and merges them automatically.

This is not currently part of our pipeline since switching to Kilosort2, but we're keeping the code around in case others find it useful. For example, it could be helpful for matching units across a series of chronic recordings.


Running
-------
```
python -m ecephys_spike_sorting.modules.automerging --input_json <path to input json> --output_json <path to output json>
```
Two arguments must be included:
1. The location of an existing file in JSON format containing a list of paths and parameters.
2. The location to write a file in JSON format containing information generated by the module while it was run.

See the `_schemas.py` file for detailed information about the contents of the input JSON.

Input data
----------
- **Kilosort outputs** : includes spike times, spike clusters, cluster quality, etc.


Output data
-----------
- **spike_clusters.npy** : updated with new cluster labels
- **cluster_group.tsv** : updated with new cluster labels